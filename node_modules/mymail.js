//API - Application Programming Interface
//APIs are third party implementations
//User ------> PostKarde.com (User registers)
//		API(Mail Sending API)------>Mail Servers
//		 |	|____________________________|
//		 |
//		 |
//User------->PostKarde.com

//Mail Servers:
//	(These are free)
//	1. smtp.gmail.com
//	2. smtp.yahoo.com
//	3. smtp.hotmail.com
//	4. smtp.rediffmail.com
//	(These are paid)
//	1. smtp.sendgrid.com
//	2. smtp.mandrill.com
//	3. smtp.mailchimp.com

/*

Node Mailer module

https://www.w3schools.com/nodejs/nodejs_email.asp

Activate gmail to allow mail sending via third party api

Less Secure App="on"

Google search="allow less secure apps"
*/

var nodemailer = require('nodemailer');

function sendmail(unm,pass,cb)
{
var transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: 'mishtu0709@gmail.com',
    pass: '10senna10'
  }
});

var mailOptions = {
  from: 'mishtu0709@gmail.com',
  to: unm,
  subject: 'Confirmation Mail for Registration',
  //text: 'Trial message sent on 25th of June to test mail API'
  html: '<h1>Welcome to PostKarde.com</h1><br><br><h2>Trial message sent on 25th of June to test mail API</h2><br><br><h2>Username: '+unm+"</h2><br><br><h2>Password: "+pass+'</h2><br><br><h1><a href=http://localhost:3000/loginauthentication/'+unm+'>Click Here To Verify Your Account</a></h1>'
};

transporter.sendMail(mailOptions, function(error, info){
  if (error) {
    cb(false);
  } else {
    cb(true);
  }
});
}

module.exports={sendmail:sendmail}















